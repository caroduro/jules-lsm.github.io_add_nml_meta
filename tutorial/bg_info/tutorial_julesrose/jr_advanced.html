<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <meta name="description" content="JULES-Rose Tutorial" />
        <meta name="author" content="JULES System Manager" />
        <link rel="icon" href="jules_logo.png" />
        <title>JULES-Rose advanced</title>
        <!-- Bootstrap core CSS -->
        <link href="../etc/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
        <!-- Bootstrap theme -->
        <link href="../etc/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" />
        <!-- Custom styles for this template -->
        <link href="general_theme.css" rel="stylesheet" />
</head>
    <body>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">JULES Advanced</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <!-- Add link to Homepage to training when created -->
                        <li class="active"><a href="#">Home</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Advanced material <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li class="dropdown-header">Advanced Tutorials</li>
                                <li><a href="#umdp3">UMDP3</a></li>
                                <li role="separator" class="divider"></li>
                                <li class="dropdown-header">Advanced Practical's</li>
                                <li><a href="#arst">Adding rose stem tests</a></li>
                                <li><a href="#umjt">UM-JULES tickets</a></li>
                                <li><a href="#rfcmc">Resolving FCM conflicts</a></li>
                            </ul>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Other material <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li class="dropdown-header">Quizzes</li>
                                <li><a href="precourse_quiz.html">Pre-course Quiz</a></li>
                                <li><a href="beginner_quiz.html">Beginner Quiz</a></li>

                                <li><a href="intermediate_quiz.html">Intermediate Quiz</a></li>
                                <li><a href="advanced_quiz.html">Advanced Quiz</a></li>
                                <li role="separator" class="divider"></li>
                                <li class="dropdown-header">Tutorials and practical's</li>
                                <li><a href="jr_beginner.html">Beginner</a></li>
                                <li><a href="jr_intermediate.html">Intermediate</a></li>
                                <li role="separator" class="divider"></li>
                                <li class="dropdown-header">Help/info</li>
                                <li><a href="jr_glossary.html">Glossary List</a></li>
                                <li><a href="jr_links.html">Links</a></li>
                                <li><a href="jr_mqrg.html">My Quick Reference Guide</a></li>
                                <li><a href="jr_structures.html">JULES structures</a></li>
                                <li><a href="jr_rosecylc_setup.html">Rose/Cylc set-up</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <!--/.nav-collapse -->
            </div>
        </nav>
        <div class="container theme-showcase" role="main">
        <div class="jumbotron">
            <h1>Advanced JULES-Rose tutorial (in development)</h1>
            <p>This aims to explain the importance of:
            <ul>
                <li><a href="#umdp3">UMDP3</a></li>
                <li><a href="#arst">Adding rose stem tests</a></li>
                <li><a href="#umjt">UM-JULES tickets</a></li>
                <li><a href="#rfcmc">Resolving FCM conflicts</a></li>

            </ul>
            </p>
        </div>

        <div class="well">
            <p>It is expected that you have:
            <ul>
            <li>Completed the <a href="http://metomi.github.io/rose/doc/rose.html">Rose User Guide</a>.</li>
            <li>Completed the <a href="jr_beginner.html">Beginner Tutorial</a>.</li>
            <li>Completed the <a href="beginner_quiz.html">Beginner Quiz</a>.</li>
            <li>Completed the <a href="jr_intermediate.html">Intermediate Tutorial</a>.</li>
            <li>Completed the <a href="intermediate_quiz.html">Intermediate Quiz</a>.</li>
            </ul>
            </p>
            <p>
            OR have:
            <ul>
            <li>Experience running rose stem and JULES-Rose suites.</li>
            <li>Made complex changes to JULES-Rose suites.</li>
            <li>Made complex changes to JULES code including testing with rose stem.</li>
            <li>Experience with FCM commands.</li>
            </ul>
            </p>
        </div>

        <br/>


        <h2><a id="umdp3">UMDP3</a></h2>
        <p>
        <ul>
            <div class="page-header">
                <h3>In development. Coming soon.</h3>
            </div>
            <div class="well">
               <p>The UM Systems team provide detailed guidance on software
                  standards, which can be found in their <a href="https://code.metoffice.gov.uk/doc/um/latest/papers/umdp_003.pdf">UMDP3</a> pdf.</p>


            </div>
        </ul>
        </p>

        <h2><a id="arst">Adding rose stem tests</a></h2>
        <p>
        <ul>
            <div class="page-header">
                <h3>In development. Coming soon.</h3>
            </div>
            <div class="well">
               <p> </p>


            </div>
        </ul>
        </p>

        <h2><a id="umjt">UM-JULES tickets</a></h2>
        <p>
        <ul>
            <div class="page-header">
                <h3>In development. Coming soon.</h3>
            </div>
            <div class="well">
               <p> </p>
<pre>
fcm co fcm:um.x_tr
cd trunk
rose stem --group=jules --new --name=umtr_jlst### --source=. --source=/path/tp/jules/branch
# trac.log will appear in the cylc-run/umtr_jlst### when the rose stem tests have finished.
</pre>
            <p>If the UM rose-stem tests fail, it may be because your changes
               require UM meta-data changes and/or a UM upgrade macro.
               In this case, you will need to create a UM branch, following 
               the <a href="https://code.metoffice.gov.uk/trac/um/wiki/working_practices">working_practices UM working practices</a>.

            </div>
        </ul>
        </p>

        <h2><a id="rfcmc">Resolving FCM conflicts</a></h2>
        <p>
        <ul>
            <div class="page-header">
                <h3>FCM Text and Tree conflicts.</h3>
            </div>
            <p>Sometimes when we merge branches into HoT branches we recieve a
               message at the end of the merge saying that we have 
               <code>Text Conflicts</code> or <code>Tree Conflicts</code>.
               <code>Text Conflicts</code> are easier to resolve than
                <code>Tree Conflicts</code> in general.</p>
            <div class="well">
            <h4>fcm conflicts</h4>
            <p>The command <code>fcm conflicts|cf</code> is a graphical tool to help
               resolve conflicts within the local/working copy.
               Note it cannot help with all conflicts.
               It works with the most effectively with Text Conflicts.
            </p>
            <p>A type of conflict that we may come across are "Text conflicts".
               These are returned via <code>fcm st</code> as
            </p>
            <pre>C    statusesC_text.txt </pre>
            <p>where column 1 has a "C" in it.
            </p>
            <p>To resolve the text conflict we use the 3-way difference tool xxdiff.
            </p>
            <p>For each file with a text conflict, the <code>fcm conflicts</code> command
               calls a graphical merge tool (i.e. xxdiff by default) to display a 3-way diff.
            </p>
            <h4>How to use xxdiff to help resolve text conflicts</h4>
            <p>The file on the left is our original file.
               The file in the middle is the common ancestor from the merge.
               The file on the right is the file containing the changes which we are merging
               in.
            </p>
            <p>The image below shows an image of a text conflict.</p> 
            <img src="images/text_conflict2.png" width="95%" id="fcm_cf">
           <p>Left click on the text option that we want to keep, it should change colour
           from yellow to purple.
                                 </p>
           <p>Then press "m", or use the toolbar; File -&gt; Exit with MERGED M.</p>
            <h4>Explanations of the three window split xxdiff:</h4>
            <p>The number on the far right panel of xxdiff tool is the number of unselected
               differences, known as "hunks" or "sections" and they are often seen in yellow.
               The correct term for the highlighted section is hunk, but here we will refer to
               it as the section as it is easier to understand and remember what we are talking about.
            </p>
            <p>When this number is 0 then we are ready to save the merged file.
            </p>
            <p>To see how the merged file will look with the current selections, click
               Windows-&gt;Toggle Merged View (keyboard shortcut: Alt+Y).
            </p>
            <p>An extra window then appears showing the merged output that updates
               interactively as we make our selections.
            </p>
            <p>
               If we just want to exit without making any decisions we can also just close
               the window.
            </p>
            <p>
               <a href="http://furius.ca/xxdiff/doc/xxdiff-doc.html">xxdiff documentation</a>
            </p>
            <p>
               If we have resolved all the conflicts in a file then we will be prompted on
               whether to run <code>svn resolved</code> on the file to signal that the file
               is no longer in conflict.
            </p>
         </div>
         <div class="well">
            <h4>fcm resolve</h4>
            <p>The <code>fcm resolve</code> command can be used to resolve conflicts in
               local/working copy files or directories.
                Mainly tree conflicts.
            </p>
            <p>A common way of using this command is:
            </p>
            <p><code>fcm resolve --accept working &lt;FILENAME&gt;</code>
            </p>
            <p>This will try to resolve the tree conflict and ask you if you 
               would like to go ahead with the merge? This is fo you to decide.</p>
            <p>
               A common way that a tree conflict occurs is after a merge when a file has been
               deleted or renamed on one branch, and modified on another.
               These are incompatible changes, therefore Subversion doesn't know which
               action to take.
               This is the cause of the tree conflict dilemma which the user must solve.
            </p>
            <p>Example: choose to keep the local version or not?</p>
<pre>
[info] tree_conflict.txt: in tree conflict.
Locally: deleted.
Externally: edited.
Answer (y) to accept the local delete.
Answer (n) to keep the file.
Keep the local version?
Enter "y" or "n" (or just press &lt;return&gt; for "n") y
Resolved conflicted state of 'tree_conflict.txt'
</pre>
            <p>In this example, to keep the file as it was before (in a deleted state), enter
               <samp>y</samp>.
            </p>
            <p>Otherwise, to accept the merge branch version of the file (adding it with the
               edited changes), enter <samp>n</samp>.
            </p>
            <br/>
            <p>See a tutorial on <a href="http://jules-lsm.github.io/tutorial/bg_info/tutorial/fcm_specifics.html#cf">FCM conflicts</a> for more details.</p>
            </div>
        </ul>
        </p>


            <br/>

            <h3>Congratulations you have completed the Advanced Tutorial!</h3>
        <br/>
        <div class="container">
        <div class="well">
        Now lets do the Advanced Quiz to highlight your learning.
        </div>
        <p><a class="btn btn-lg btn-success" href="Advanced_quiz.html" role="button">Advanced Quiz</a></p>
        </div>
        <br/>
        <br/>
        <div class="container">
        <div class="well">
        Now you have completed the tutorial, for any further questions please email <a href="mailto:Jules-Support@metoffice.gov.uk?Subject=JULES%20Tutorial%20Support">JULES Support</a>
        </div>
        </div>
        <br/>
        <div class="container">
        </div>
        <hr/>
        <div class="container-fluid text-center">
        <div class="row">
        <div class="col-md-12">
        <address><small>
        &copy; British Crown Copyright 2006-17
        <a href="http://www.metoffice.gov.uk">Met Office</a>.<br />
        This document is released under the British <a href=
            "http://www.nationalarchives.gov.uk/doc/open-government-licence/" rel=
            "license">Open Government Licence</a>.<br />
        </small>
        </address>
        </div>
        </div>
        </div>
        <!-- Bootstrap core JavaScript
            ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="./js/vendor/jquery.min.js"><\/script>')</script>
        <script src="../etc/bootstrap/js/bootstrap.min.js"></script>
        <script src="./js/docs.min.js"></script>
        <script LANGUAGE="JavaScript">
            update = new Date(document.lastModified);
            theMonth = update.getMonth() + 1;
            theDate = update.getDate();
            theYear = update.getFullYear();
            theHour = update.getHours();
            theMin = update.getMinutes();
            theSec = update.getSeconds();
            document.write("<strong> Last Modified:</strong> " + theYear + "-" + theMonth + "-" + theDate + "T" + theHour + ":" + theMin + ":" + theSec + "Z");
                
        </script>
        </div>
    </body>
</html>

