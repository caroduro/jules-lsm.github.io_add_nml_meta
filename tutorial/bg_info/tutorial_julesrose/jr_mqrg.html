<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <meta name="description" content="JULES-Rose Tutorial">
        <meta name="author" content="JULES System Manager">
        <link rel="icon" href="jules_logo.png">
        <title>JULES-Rose My Quick Reference Guide</title>
        <!-- Bootstrap core CSS -->
        <link href="../etc/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <!-- Bootstrap theme -->
        <link href="../etc/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
        <!-- Custom styles for this template -->
        <link href="general_theme.css" rel="stylesheet">
    </head>
    <body>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">JULES-Rose My Quick Reference Guide</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <!-- Add link to Homepage to training when created -->
                        <li class="active"><a href="#">Home</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">MQRG<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="#S1">Committing local/working copy</a></li>
                                <li><a href="#S2">Updating a local/working copy</a></li>
                                <li><a href="#S3">Using a keyword to check the log</a></li>
                                <li><a href="#S4">Checkout the trunk and create a branch</a></li>
                                <li><a href="#S5">Creating a branch of a branch</a></li>
                                <li><a href="#S6">Reverting an uncommitted change</a></li>
                                <li><a href="#S7">Reverting a committed change</a></li>
                                <li><a href="#S8">Merging a local/working copy</a></li>
                                <li><a href="#S9">Listing branches and then checking one out</a></li>
                                <li><a href="#S10">Text conflicts and accepting the working copy</a></li>
                            </ul>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Other material <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li class="dropdown-header">Quizzes</li>
                                <li><a href="precourse_quiz.html">Pre-course Quiz</a></li>
                                <li><a href="user_quiz.html">User Quiz</a></li>
                                <li><a href="developer_quiz.html">Developer Quiz</a></li>
                                <li><a href="developer_advanced_quiz.html">Developer Advanced Quiz</a></li>
                                <li role="separator" class="divider"></li>
                                <li class="dropdown-header">Tutorials and practical's</li>
                                <li><a href="jr_user.html">User</a></li>
                                <li><a href="jr_developer.html">Developer</a></li>
                                <li><a href="jr_developer_advanced.html">Developer Advanced</a></li>
                                <li role="separator" class="divider"></li>
                                <li class="dropdown-header">Help/info</li>
                                <li><a href="jr_links.html">Links</a></li>
                                <li><a href="jr_glossary.html">Glossary List</a></li>
                                <li><a href="jr_structures.html">JULES structures</a></li>
                                <li><a href="jr_rosecylc_setup.html">Rose/Cylc setup</a></li>
                                <li><a href="jr_jasmin_setup.html">JULES JASMIN setup</a></li>
                                <li><a href="jr_monsoon_setup.html">JULES MONSooN setup</a></li>
                                <li><a href="jr_help_page.html">JULES help</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <!--/.nav-collapse -->
            </div>
        </nav>
        <div class="container theme-showcase" role="main">
            <div class="jumbotron">
                <h2>My Quick Reference Guide</h2>
                <br/>
                <h3>JULES-Rose</h3>
                <br/>
                Here are sets of commands that are commonly used.
                <ul>
                    <li><a href="#R1">rose stem</a></li>
                    <li><a href="#R2">rose suite-run</a></li>
                </ul>
                <br/>
                <h3>FCM</h3>
                <br/>
                Here are sets of commands that are commonly used and the order that they are they are usually issued in.
                <ul>
                    <li><a href="#S1">Committing local/working copy</a></li>
                    <li><a href="#S2">Updating a local/working copy</a></li>
                    <li><a href="#S3">Using a keyword to check the log</a></li>
                    <li><a href="#S4">Checkout the trunk and create a branch</a></li>
                    <li><a href="#S6">Reverting an uncommitted change</a></li>
                    <li><a href="#S7">Reverting a committed change</a></li>
                    <li><a href="#S8">Merging a local/working copy</a></li>
                    <li><a href="#S9">Listing branches and then checking one out</a></li>
                    <li><a href="#S10">Text conflicts and accepting the working copy</a></li>
                </ul>
            </div>

            <br/>
            <br/>
            <h1><a id="R1">rose stem</a></h1>
            <div class="well">
                <pre>
# use the desired version number i.e. vn4p7/vn4.7
mkdir -p ~jules/vn#p#/
cd ~jules/vn#p#
# checkout the trunk at vn#.#
fcm co fcm:jules.x_tr@vn#.#
# or not using the keywords
fcm co https://code.metoffice.gov.uk/svn/jules/main/trunk@vn#.#
cd trunk
# run the rose stem tests
rose stem --group=all --new
# create a branch for development on of the JULES code
fcm bc &lt;BRANCH_NAME&gt; fcm:jules.x_tr@vn#.#
cd ~jules/vn#p#
# list the branches that you own
fcm bls
# checkout your new branch
fcm co fcm:jules.x_br/dev/&lt;USER&lt;/&lt;BRANCH_NAME&gt;
# change to that directory
cd ~jules/vn#p#/&lt;BRANCH_NAME&gt;
# check the info on the branch
fcm info
# make some changes
# check the status of the local copy compared to the repository
fcm st
# if this returns a "?" then you have locally add files or directories, use:
#  "fcm add &lt;FILENAME&gt;" to add them to the repository
# if this returns a "!" then you have locally removed files or directories, use:
#  "fcm rm -c &lt;FILENAME&gt;" to remove them from the repository
# now commit your changes to the repository
fcm ci
# run the rose stem tests on your changed JULES code
rose stem --new
# copy the "trac.log" into the TicketSummary for the ticket as evidence for
#  the review process.
cd ~cylc-run/&lt;BRANCH_NAME&gt;
# open the file for copying with a preferred editor
gvim trac.log
                </pre>
            </div>
             <br/>

            <br/>
            <h1><a id="R2">rose suite-run</a></h1>
            <div class="well">
                <pre>
# checkout a suite that you want to base your experiments on
rosie checkout &lt;SUITE_ID&gt;
cd ~roses/&lt;SUITE_ID&gt;
rose suite-run
# if the suite is what is needed then copy to make changes to and to be the owner
rosie copy &lt;SUITE_ID&gt;
cd ~roses/&lt;NEW_SUITE_ID&gt;
# make change so it is what is required
# check the status of the local copy compared to the repository
fcm st
# if this returns a "?" then you have locally add files or directories, use:
#  "fcm add &lt;FILENAME&gt;" to add them to the repository
# if this returns a "!" then you have locally removed files or directories, use:
#  "fcm rm -c &lt;FILENAME&gt;" to remove them from the repository
# now commit your changes to the repository, then the repository is the same as
#  the experiment that was run
fcm ci
rose suite-run
# more changes are needed but for traceability create a branch
fcm bc &lt;BRANCH_NAME&gt;
# list all branches
fcm bls
# switch to the branch
fcm sw &lt;BRANCH_NAME&gt;
# check the info to prove that it is the branch
fcm info
# make some changes
# check the status of the local copy compared to the repository
fcm st
# if this returns a "?" then you have locally add files or directories, use:
#  "fcm add &lt;FILENAME&gt;" to add them to the repository
# if this returns a "!" then you have locally removed files or directories, use:
#  "fcm rm -c &lt;FILENAME&gt;" to remove them from the repository
# now commit your changes to the repository
fcm ci
# run the rose suite to run the configuration changes made
rose suite-run --new --name=&lt;DIFFERENT_NAME&gt;
# check the output
cd ~cylc-run/&lt;DIFFERENT_NAME&gt;/work/1/&lt;TASK_NAME&gt;/output
# this output can be compared with the output from the original &lt;NEW_SUITE_ID&gt;
cd ~cylc-run/&lt;NEW_SUITE_ID&gt;/work/1/&lt;TASK_NAME&gt;/output
# the orginal suite which is not needed can be deleted
#  make sure you only delete the required files (cylc-run and local copy)  by answering carefully
rosie delete &lt;SUITE_ID&gt;
                </pre>
            </div>
             <br/>

            <br/>
            <h1><a id="S1">Committing local/working copy</a></h1>
            <div class="well">
                <pre>
# check that you are in the correct copy and revision of your local/working copy of the repository
fcm info
# check the changes compared to the committed version of the repository.
fcm st
# make appropriate changes.
# commit the local changes to the repository.
fcm ci
# confirm there are no changes in the local copy.
fcm st
# confirm the revision number has increased as expected.
fcm info
</pre>
            </div>
            <br/>
            <h1><a id="S2">Updating a local/working copy</a></h1>
            <div class="well">
                <pre>
fcm info
fcm st
# check what updates (-u) could be applied to the local/working copy.
fcm st -u
# if you are happy with them update your local/working copy.
fcm update
# check the status and commit to the repository any required changes.
fcm st
fcm ci
</pre>
            </div>
            <br/>
            <h1><a id="S3">Using a keyword to check the log</a></h1>
            <div class="well">
                <pre>
# setup your keyword.
cd ~/.metomi/fcm/
# edit the <samp>keyword.cfg</samp> file, for example:
location{primary}[jules.x] = https://code.metoffice.gov.uk/svn/jules/main
location{primary}[jules_doc.x] = https://code.metoffice.gov.uk/svn/jules/doc
# check the log of the local/working copy.
fcm log fcm:jules.x
</pre>
            </div>
            <br/>
            <h1><a id="S4">Checkout the trunk and create a branch</a></h1>
            <div class="well">
                <pre>
# checkout the trunk with the URL.
fcm co URL &lt;LOCATION OF WORKING/LOCAL COPY&gt;
# checkout the trunk with the keyword if it is setup.
fcm co fcm:jules.x_tr &lt;LOCATION OF WORKING/LOCAL COPY&gt;
# create a branch of the trunk.
fcm bc &lt;NAME OF BRANCH&gt;
#
# if you already have a local/working copy of the trunk and want to branch from
# that...
cd &lt;LOCATION OF WORKING/LOCAL COPY OF TRUNK&gt;
# check it is the trunk version.
fcm info
# check for any updates and if you want them.
fcm st -u
# update if there are changes and you want them.
fcm update
# create a branch of the trunk.
fcm bc &lt;NAME OF BRANCH&gt;
# checkout the branch
fcm co &lt;BRANCH_URL&gt; &lt;LOCATION OF WORKING/LOCAL COPY OF BRANCH&gt;
cd &lt;LOCATION OF WORKING/LOCAL COPY OF BRANCH&gt;
</pre>
            </div>
            <br/>
            <h1><a id="S6">Reverting an uncommitted change</a></h1>
            <div class="well">
                <pre>
# this only works on changes in the local/working copy which have not yet been 
#committed to the repository.
fcm st
# select the local changes that you want to revert and revert them.
fcm revert &lt;FILENAME1&gt; &lt;FILENAME2&gt; &lt;DIRECTORY1&gt;
# check the changes are correct.
fcm st
# commit the changes if all is as required.
fcm ci
</pre>
            </div>
            <br/>
            <h1><a id="S7">Reverting a committed change</a></h1>
            <div class="well">
                <pre>
# check what revisions are available for reverting.
fcm binfo 
# to revert changes that you have already committed
fcm merge --reverse --revision M:N
# check the status and commit if as required.
fcm st
fcm info 
</pre>
            </div>
            <br/>
            <h1><a id="S8">Merging a local/working copy</a></h1>
            <div class="well">
                <pre>
# merging a local copy branch into the trunk.
# change or switch to the trunk local/working copy.
fcm merge &lt;BRANCH_URL&gt;
# accept the merge if it is correct and commit changes.
fcm ci
</pre>
            </div>
            <br/>
            <h1><a id="S9">Listing branches and then checking one out</a></h1>
            <div class="well">
                <pre>
# list possible branches
fcm bls
# select one to checkout
fcm co &lt;BRANCH_URL&gt; &lt;LOCATION OF WORKING/LOCAL COPY OF BRANCH&gt;
cd &lt;LOCATION OF WORKING/LOCAL COPY OF BRANCH&gt;
</pre>
            </div>
            <br/>
            <h1><a id="S10">Text conflicts and accepting the working copy</a></h1>
            <div class="well">
                <pre>
fcm st
# if it is a text conflict, e.g.
# C    statusesC_text.txt
# not a tree conflict, e.g.
#        C src/utility/my_tools
# we can use:
fcm cf
# this brings up an xxdiff three-way window.
# The middle frame of the three is the common ancestor of the two.
# The one on the left is the local/working copy directory that we are in, the
# one considered the original.
# The one on the right is the one we are trying to merge in.
# Left click on the text option that we want to keep, it should change colour
# from yellow to purple.
# Then press "m", or use the toolbar; File -&gt; Exit with MERGED M.
<font color="blue">
        [info] statusesC_text.txt: in text conflict.
        You merged all the changes.
        Run "svn resolve --accept working statusesC_text.txt"?
        Enter "y" or "n" (or just press &lt;return&gt; for "n") <font color="black">y</font>
        Resolved conflicted state of 'statusesC_text.txt
</font>
#
#
fcm st
# if it is a tree conflict.
# find out more information about the file/directory concerned.
fcm log -v &lt;FILENAME&gt;
# if you want to keep your local/working copy you 
# can try:
fcm resolve --accept working &lt;FILENAME&gt;
<font color="blue">
        Resolved conflicted state of 'src/utility'
</font>
</pre>
            </div>
            <br>
            <br>
            <div class="container">
            </div>
            <hr/>
            <div class="container-fluid text-center">
                <div class="row">
                    <div class="col-md-12">
                        <address><small>
                            &copy; British Crown Copyright 2006-17
                            <a href="http://www.metoffice.gov.uk">Met Office</a>.<br />
                            This document is released under the British <a href=
                                "http://www.nationalarchives.gov.uk/doc/open-government-licence/" rel=
                                "license">Open Government Licence</a>.<br />
                            </small>
                        </address>
                    </div>
                </div>
            </div>
            <!-- Bootstrap core JavaScript
                ================================================== -->
            <!-- Placed at the end of the document so the pages load faster -->
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
            <script>window.jQuery || document.write('<script src="./js/vendor/jquery.min.js"><\/script>')</script>
            <script src="../etc/bootstrap/js/bootstrap.min.js"></script>
            <script src="./js/docs.min.js"></script>
            <script LANGUAGE="JavaScript">
                update = new Date(document.lastModified);
                theMonth = update.getMonth() + 1;
                theDate = update.getDate();
                theYear = update.getFullYear();
                theHour = update.getHours();
                theMin = update.getMinutes();
                theSec = update.getSeconds();
                document.write("<strong> Last Modified:</strong> " + theYear + "-" + theMonth + "-" + theDate + "T" + theHour + ":" + theMin + ":" + theSec + "Z");
            </script>
        </div>
    </body>
</html>

